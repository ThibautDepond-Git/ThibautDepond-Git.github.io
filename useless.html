<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="asset/favicon.ico" />
        <link rel="stylesheet" href="CSS/myCSS.css">
        <link href="https://fonts.googleapis.com/css?family=Public+Sans:400,700&display=swap" rel="stylesheet" />
        <title>&#60/ I am useless &#62</title>
    </head>
    <body>
        <header>
            <nav>
                <h1>Hello Banana !</h1>
                <ul>
                    <li><a href="index.html">&#60 Home &#62</a></li>
                    <li><a href="https://www.linkedin.com/in/thibaut-depond-165b7bbb/" target="blank">&#60 Linkedin &#62</a></li>
                    <li><a href="resume.html">&#60 my resume &#62</a></li>
                    <li><a href="#">&#60 useless &#62</a></li>
                </ul>
                <p class="hosted">hosted by github page</p>
            </nav>
        </header>

        </br>

        <article>
            <p>Async Await VS .then()</p>
            <div>
                <button onclick="hey()"> - 1 - </button>
                <button onclick="heyWithAsyncAwait()"> - 2 - </button>
            </div>
        </article>

        <article>
            <section class="app">
                <h1>ITUNES API</h1>
                <div class="search-container">
                    <input type="text" placeholder="search" id="search" />
                    <button type="button" class="btn">Search</button>
                </div>
                <div class="results"></div>
                <p class="no-result">
                    No results found<br />Try different keywords
                </p>
            </section>
            <audio class="player" controls>
                Your browser does not support the
                <code>audio</code> element.
            </audio>
            <script src="./index.js"></script>
        </article>

        <Script>
            function envoyerRequete(location) {
                return new Promise((resolve, reject) => {
                    console.log(`making request to ${location}`)
                    if (location === "Google") {
                        resolve("Google dit hello !")
                    } else {
                        reject({ message: "On ne peut parler qu'à Google" })
                    }
                });
            }

            function traiterReponse(response) {
               return new Promise((resolve, reject) => {
                   console.log("Traitement de la réponse")
                   resolve(`Réponse traitée... ${response}`)
               });
            }

            const hey = () => {
                envoyerRequete('https://perdu.com')
                    .then((res) => traiterReponse(res))
                    .then((res) => console.log(res))
                    .catch((err) => console.log(err))
            }

            const heyWithAsyncAwait = async () => {
                const response = await envoyerRequete('Google')
                const responseT = await traiterReponse(response)
                console.log(responseT)
            }

        </Script>
    </body>
</html>
